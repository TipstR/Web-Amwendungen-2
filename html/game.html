<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Game</title>
        <link rel="stylesheet" type="text/css" href="../lib/style.css">
    </head>
    <body>

        <header id="header">
            <nav id= "nav1">
                <section id= "header line">
                    <section id="style logo">
                        <a href="../index.html" class="L1 remove_text_decoration" id="logo"> <img src="../Backend/resources/logo.png" alt="logo"></a>
                    </section>
                    <section id= "menu style">
                        <a href="../index.html" class="L1 remove_text_decoration" id="store"> Store </a>
                        <a href="../html/library.html" class="L1 remove_text_decoration" id="library"> Library </a>
                        <a href="../html/about.html" class="L1 remove_text_decoration" id="about"> About </a>
                    </section>
                    <section id="style search cart">
                        <a> <label for="search"></label><input type="text" id="search" placeholder="Search" > </a>
                        <a href="../html/cart.html" class="L1 remove_text_decoration" id="cart"> <img src="../Backend/resources/cart.png" alt="cart" width="30" height="30"> </a>
                    </section>
                </section>
            </nav>
        </header>



        <main class="center">

            <h1 style="text-algin:center"> Name of the Game </h1>

            <table id="cover_edition">
                <tr>
                    <td style="text-align:left;" colspan="1" rowspan="2" id="">
                        <img src="../Backend/resources/tetris.jpg" alt="game_logo" height="292.5" width="292.5">
                    </td>
                    <td style="width:15%;">
                        <span style="color: yellow; font-size: 50px">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                    </td>
                </tr>

                <tr>
                    <td id="blurb"> <p> blurb: A short description about the game </p> </td>
                </tr>
                <tr>
                    <td>
                        <form id="drop_down_game_editions">
                            <label> Editionen </label>
                            <label>
                                <select>
                                    <option value="Standard"> Standard
                                    </option>
                                    <option value="Gold"> Gold
                                    </option>
                                    <option value="Ultimate"> Ultimate
                                    </option>
                                </select>
                            </label>
                        </form>
                    </td>

                    <td id="purchase_button_td"><button id="purchase_button" type="submit"> Purchase </button></td>
                </tr>
            </table>


            <table  id="descriptionGameFull">
                <tr>
                    <td >About this Game:</td>
                </tr>
                <tr>
                    <td>     Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
                            sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
                            sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
                            Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit
                            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
                            tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
                            At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,
                            no sea takimata sanctus est Lorem ipsum dolor sit amet.
                    </td>
                </tr>
            </table>


            <table id="evaluationfield">
                <tr>
                    <td style="width:fit-content" id="review_account">
                        <span>Account</span>
                    </td>
                    <td>
                        <div class="star-form">
                            <input type="radio" id="rate5" name="rating" value="5" />
                            <label for="rate5" title="5 star"><span class="icon-star">&#9733;</span></label>
                            <input type="radio" id="rate4" name="rating" value="4" />
                            <label for="rate4" title="4 star"><span class="icon-star">&#9733;</span></label>
                            <input type="radio" id="rate3" name="rating" value="3" />
                            <label for="rate3" title="3 star"><span class="icon-star">&#9733;</span></label>
                            <input type="radio" id="rate2" name="rating" value="2" />
                            <label for="rate2" title="2 star"><span class="icon-star">&#9733;</span></label>
                            <input type="radio" id="rate1" name="rating" value="1" />
                            <label for="rate1" title="1 star"><span class="icon-star">&#9733;</span></label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="4"><label for="evaluationtext"></label><textarea rows="6" id="evaluationtext" placeholder="Your review here..." ></textarea></td>
                </tr>
                <tr>
                    <td style="width:1%"></td>
                    <td style="width:1%"></td>
                    <td style="width:25%"></td>
                    <td id="review_button_td"><button id="review_button" type="submit"> Send </button></td>
                </tr>
            </table>
        </main>

            <footer id="footer">
                <a id="privacy_policy" class=remove_text_decoration href="../html/privacy_policy.html"> Privacy Policy </a>
                <a id="legal" class=remove_text_decoration href="../html/legal.html"> Legal </a>
                <a id="contact" class=remove_text_decoration href="../html/contact.html"> Contact </a>
            </footer>

        <script>
            $(document).ready(function () {
                console.log('Document ready, loading data from Service');
                $.ajax({
                    url: 'http://localhost:8000/api/spiele/alle',
                    method: 'get',
                    contentType: 'application/json; charset=utf-8',
                    cache: false,
                    dataType: 'json'
                }).done(function (response) {
                    console.log('Data loaded successfully');
                    console.log(response);

                    /* die Idee bei diesem Prinzip ist, dass HTML Code als Text angesehen wird.
                        Diesen können wir häppchen-weise in einer Variable zusammen setzen
                        und dann auch ausgeben
                        Hinweis: Damit man Quotes/doppelte Anführungsstriche NICHT escapen muss,
                        kann man bei jQuery einfache Anführungszeichen verwenden
                    */

                    // hilfsvariable anlegen
                    var content = '';

                    // neuen code zusammensetzen
                    content += '<table>'

                    for (i = 0; i < response.length; i++) {
                        var obj = response[i];
                        content += '<tr>';
                        content += '<td>' + obj.id + '</td>';
                        content += '<td>' + obj.name + '</td>';
                        content += '<td><img src=\"../backend/' + obj.cover_pfad + '\"></td>';
                        content += '</tr>';
                    }

                    content += '</table>';
                    console.log(content);
                    // zusammengesetzen Code im Dokument ausgeben
                    $('#dyntarget').html(content);

                }).fail(function (jqXHR, statusText, error) {
                    console.log('Error occured');
                    console.log('Response Code: ' + jqXHR.status + ' - Message: ' + jqXHR.responseText);
                    alert(jqXHR.responseText);
                });
            });
        </script>
    </body>
</html>