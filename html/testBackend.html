<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> test </title>
        <link rel="stylesheet" type="text/css" href="../lib/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="../lib/scripts/header.js"></script>
    </head>


    <body>
        <header id="header">

        </header>

        <footer id="footer">
            <a id="privacy_policy" class=remove_text_decoration href="../html/privacy_policy.html"> Privacy Policy </a>
            <a id="legal" class=remove_text_decoration href="../html/legal.html"> Legal </a>
            <a id="contact" class=remove_text_decoration href="../html/contact.html"> Contact </a>
        </footer>

        <main id ="dyntarget">

        </main>

        <script>
            $(document).ready(function () {
                getHeader();

                console.log('Document ready, loading data from Service');
                $.ajax({
                    url: 'http://localhost:8000/api/spiele/alle',
                    method: 'get',
                    contentType: 'application/json; charset=utf-8',
                    cache: false,
                    dataType: 'json'
                }).done(function (spiele) {
                    console.log('Data loaded successfully');
                    console.log(spiele);

                    $.ajax({
                        url: 'http://localhost:8000/api/trending/cover_pfade',
                        method: 'get',
                        contentType: 'application/json; charset=utf-8',
                        cache: false,
                        dataType: 'json'
                    }).done(function (trending) {
                        console.log('Data loaded successfully');
                        console.log(trending);
                        /* die Idee bei diesem Prinzip ist, dass HTML Code als Text angesehen wird.
                        Diesen können wir häppchen-weise in einer Variable zusammen setzen
                        und dann auch ausgeben
                        Hinweis: Damit man Quotes/doppelte Anführungsstriche NICHT escapen muss,
                        kann man bei jQuery einfache Anführungszeichen verwenden
                    */

                        content = '';


                        // zusammengesetzen Code im Dokument ausgeben
                        $('#dyntarget').html(content);

                    }).fail(function (jqXHR, statusText, error) {
                        console.log('Error occured');
                        console.log('Response Code: ' + jqXHR.status + ' - Message: ' + jqXHR.responseText);
                        alert(jqXHR.responseText);
                    });
                });
            });
        </script>

    </body>
</html>